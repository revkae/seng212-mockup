<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Change Password - LazyCook</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
    }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes popUpScale {
      0% { opacity: 0; transform: scale(0.7); }
      60% { opacity: 1; transform: scale(1.05); }
      100% { opacity: 1; transform: scale(1); }
    }
    @keyframes pulse-sm {
      0%, 100% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.3); opacity: 0.7; }
    }

    .animate-fadeIn { animation: fadeIn 0.6s ease-out forwards; }
    .animate-fadeInUp { animation: fadeInUp 0.6s ease-out forwards; }
    .animate-popUpScale { animation: popUpScale 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55) forwards; }

    .opacity-0-initial { opacity: 0; }
    .header-link::after { content: ''; display: block; width: 0; height: 2px; background: #644F9C; transition: width .3s ease-in-out; }
    .header-link:hover::after, .header-link-active::after { width: 100%; }
    .notification-badge.pulsing { animation: pulse-sm 1.5s ease-in-out 3; }

    .notification-dropdown { opacity: 0; transform: translateY(10px) scale(0.95); transition: opacity 0.2s ease-out, transform 0.2s ease-out; pointer-events: none; }
    .notification-dropdown.active { opacity: 1; transform: translateY(0) scale(1); pointer-events: auto; }
    .notification-dropdown::before { content: ""; position: absolute; bottom: 100%; right: 10px; margin-left: -5px; border-width: 6px; border-style: solid; border-color: transparent transparent white transparent; filter: drop-shadow(0 -1px 1px rgba(0,0,0,0.05)); }
    
    .toast-notification {
        transition: opacity 0.3s ease-out, transform 0.3s ease-out;
    }
    .toast-notification.show {
        opacity: 1;
        transform: translateY(0) translateX(-50%);
    }
    .input-group { position: relative; }
    .password-toggle {
        position: absolute;
        top: 50%;
        right: 0.75rem; /* Adjust as needed for padding */
        transform: translateY(-50%);
        cursor: pointer;
        color: #A0AEC0; /* gray-500 */
    }
    .password-toggle:hover {
        color: #718096; /* gray-600 */
    }
  </style>
</head>
<body class="bg-[#F9FAFB]">
<div class="flex flex-col min-h-screen">
  <!-- Header - Logged In State -->
  <header class="bg-white shadow-sm sticky top-0 z-50 opacity-0-initial animate-fadeInUp" style="animation-delay: 0.1s;">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between h-16">
            <a href="index_logged_in.html" class="text-[#644F9C] text-2xl sm:text-3xl font-bold">
                lazy.cook
            </a>
            <nav class="hidden md:flex items-center space-x-4 lg:space-x-6">
                <a href="index_logged_in.html" class="header-link text-[#374151] text-sm sm:text-base font-semibold hover:text-[#644F9C] px-1 py-1">Search</a>
                <a href="dashboard.html" class="header-link text-[#374151] text-sm sm:text-base font-semibold hover:text-[#644F9C] px-1 py-1">Dashboard</a>
                <a href="create_recipe_part1.html" class="text-white bg-[#4F9C78] hover:bg-opacity-90 text-sm sm:text-base font-semibold px-4 py-2 rounded-md transition-all duration-200 transform hover:scale-105 active:scale-95">Create Recipe</a>
            </nav>
            <div class="flex items-center space-x-3 sm:space-x-4">
                <div id="cp-notification-icon-wrapper" class="relative">
                    <button id="cp-notification-button" title="Notifications" class="p-1 transition-transform duration-200 hover:scale-110 focus:outline-none">
                        <img src="https://storage.googleapis.com/tagjs-prod.appspot.com/v1/KwOHlBTY7I/sbed0mph_expires_30_days.png" alt="Notifications" class="w-[20px] h-[25px] sm:w-[24px] sm:h-[30px] object-contain"/>
                    </button>
                    <span id="cp-notification-badge" class="notification-badge absolute top-0 right-0 block h-2.5 w-2.5 sm:h-3 sm:w-3 transform -translate-y-1/3 translate-x-1/3 bg-red-500 rounded-full ring-2 ring-white hidden"></span>
                    <div id="cp-notification-dropdown-container" class="notification-dropdown absolute top-full right-0 mt-2 w-80 sm:w-96 bg-white rounded-lg shadow-xl border border-gray-200 z-50 overflow-hidden">
                        <div class="p-2 border-b border-gray-200"><h3 class="text-sm font-semibold text-gray-700">Notifications</h3></div>
                        <iframe id="cp-notification-iframe" src="about:blank" class="w-full h-64 sm:h-80 border-0" title="Notifications Content"></iframe>
                        <div class="p-2 text-center border-t border-gray-200"><a href="#" onclick="alert('Viewing all notifications (Placeholder)')" class="text-xs text-[#644F9C] hover:underline">View all notifications</a></div>
                    </div>
                </div>
                <a href="dashboard.html" title="User Profile" class="p-1 transition-transform duration-200 hover:scale-110">
                    <img src="https://storage.googleapis.com/tagjs-prod.appspot.com/v1/KwOHlBTY7I/l3g6l4b1_expires_30_days.png" alt="User Avatar" class="w-8 h-8 sm:w-9 sm:h-9 rounded-full object-cover border-2 border-transparent hover:border-[#644F9C]">
                </a>
            </div>
             <div class="md:hidden"> <!-- Hamburger Menu -->
                <button class="text-gray-600 hover:text-[#644F9C] p-2" onclick="alert('Mobile menu (not functional - logged in state)')">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                </button>
            </div>
        </div>
    </div>
  </header>

  <main class="flex-grow container mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12 md:py-16">
    <div class="max-w-2xl mx-auto bg-white p-6 sm:p-8 md:p-10 rounded-xl shadow-xl border border-gray-200 opacity-0-initial animate-popUpScale" style="animation-delay: 0.3s;">
        <h1 class="text-2xl sm:text-3xl font-bold text-[#374151] mb-6 sm:mb-8 text-center">Change Your Password</h1>
        
        <form id="change-password-form" class="space-y-6">
            <div>
                <label for="current-password" class="block text-sm font-medium text-gray-700 mb-1">Current Password</label>
                <div class="input-group">
                    <input type="password" id="current-password" name="current_password" required
                        class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#644F9C] focus:border-[#644F9C] transition-colors"
                        placeholder="Enter your current password">
                </div>
            </div>

            <div>
                <label for="new-password" class="block text-sm font-medium text-gray-700 mb-1">New Password</label>
                <div class="input-group">
                    <input type="password" id="new-password" name="new_password" required
                        class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#644F9C] focus:border-[#644F9C] transition-colors"
                        placeholder="Enter new password (min. 8 characters)">
                    <span class="password-toggle" onclick="togglePasswordVisibility('new-password', this)">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>
                    </span>
                </div>
                <p class="text-xs text-gray-500 mt-1">Must be at least 8 characters long and include a mix of letters and numbers.</p>
            </div>

            <div>
                <label for="confirm-password" class="block text-sm font-medium text-gray-700 mb-1">Confirm New Password</label>
                <div class="input-group">
                    <input type="password" id="confirm-password" name="confirm_password" required
                        class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#644F9C] focus:border-[#644F9C] transition-colors"
                        placeholder="Confirm your new password">
                     <span class="password-toggle" onclick="togglePasswordVisibility('confirm-password', this)">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>
                    </span>
                </div>
            </div>

            <div>
                <button type="button" onclick="window.location.href='dashboard.html'"
                    class="w-full bg-[#644F9C] hover:bg-opacity-90 text-white font-semibold py-3 px-5 rounded-md transition-all duration-200 transform hover:scale-105 active:scale-95 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4c3a8a]">
                    Update Password
                </button>
            </div>
        </form>
        <div class="mt-6 text-center">
             <a href="dashboard.html" class="text-sm text-gray-600 hover:text-[#644F9C] hover:underline">Cancel and return to Dashboard</a>
        </div>
    </div>
     <div class="text-center my-8 opacity-0-initial animate-popUpScale" style="animation-delay: 0.5s;">
      <button id="cp-test-notification-btn" class="bg-pink-500 hover:bg-pink-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition-all duration-200 ease-in-out transform hover:scale-105 active:scale-95">
        Test ChangePass Notification
      </button>
    </div>
  </main>

  <footer class="text-center py-8 bg-gray-100 border-t border-gray-200 mt-12 opacity-0-initial animate-fadeInUp" style="animation-delay: 0.6s;">
    <p class="text-sm text-gray-600">Â© 2023 LazyCook. All rights reserved.</p>
    <div class="mt-2">
      <a href="#" onclick="alert('Privacy Policy page (Placeholder)')" class="text-xs text-gray-500 hover:text-[#644F9C] px-2">Privacy Policy</a>
      <a href="#" onclick="alert('Terms of Service page (Placeholder)')" class="text-xs text-gray-500 hover:text-[#644F9C] px-2">Terms of Service</a>
    </div>
  </footer>

  <!-- Toast Notification -->
  <div id="toast-notification" class="fixed bottom-5 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-6 py-3 rounded-lg shadow-lg opacity-0 translate-y-10 z-[100]">
    <span id="toast-message">Message here</span>
  </div>

</div>

<script>
  // --- Notification Bell Script ---
  const cpNotificationIconWrapper = document.getElementById('cp-notification-icon-wrapper');
  const cpNotificationBadge = document.getElementById('cp-notification-badge');
  const cpTestNotificationBtn = document.getElementById('cp-test-notification-btn');
  const cpNotificationDropdownContainer = document.getElementById('cp-notification-dropdown-container');
  const cpNotificationIframe = document.getElementById('cp-notification-iframe');
  let cpHasNewNotification = false;
  let cpNotificationHoverTimeout;
  let cpIframeContentLoaded = false;

  function cpShowNewNotificationIndicator() {
    if (cpNotificationBadge) {
      cpNotificationBadge.classList.remove('hidden');
      cpNotificationBadge.classList.remove('pulsing');
      void cpNotificationBadge.offsetWidth;
      cpNotificationBadge.classList.add('pulsing');
      cpHasNewNotification = true;
      setTimeout(() => {
        if (cpHasNewNotification && cpNotificationBadge) {
          cpNotificationBadge.classList.remove('pulsing');
        }
      }, 4500);
    }
  }
  function cpOpenNotificationDropdown() {
    if (!cpIframeContentLoaded && cpNotificationIframe) {
      cpNotificationIframe.src = 'notifications_content.html';
      cpIframeContentLoaded = true;
    }
    if (cpNotificationDropdownContainer) cpNotificationDropdownContainer.classList.add('active');
    if(cpHasNewNotification && cpNotificationBadge) {
      cpNotificationBadge.classList.add('hidden');
      cpNotificationBadge.classList.remove('pulsing');
      cpHasNewNotification = false;
    }
  }
  function cpCloseNotificationDropdown() {
    if (cpNotificationDropdownContainer) cpNotificationDropdownContainer.classList.remove('active');
  }

  if (cpNotificationIconWrapper && cpNotificationDropdownContainer && cpTestNotificationBtn) {
    cpNotificationIconWrapper.addEventListener('mouseenter', () => { clearTimeout(cpNotificationHoverTimeout); cpOpenNotificationDropdown(); });
    cpNotificationIconWrapper.addEventListener('mouseleave', () => {
      cpNotificationHoverTimeout = setTimeout(() => {
        if (cpNotificationDropdownContainer && !cpNotificationDropdownContainer.matches(':hover')) cpCloseNotificationDropdown();
      }, 300);
    });
    cpNotificationDropdownContainer.addEventListener('mouseenter', () => { clearTimeout(cpNotificationHoverTimeout); });
    cpNotificationDropdownContainer.addEventListener('mouseleave', () => {
      cpNotificationHoverTimeout = setTimeout(() => cpCloseNotificationDropdown(), 300);
    });
    cpTestNotificationBtn.addEventListener('click', cpShowNewNotificationIndicator);
  }

  // --- Toast Notification Script ---
  const toastElement = document.getElementById('toast-notification');
  const toastMessageElement = document.getElementById('toast-message');
  let toastTimeout;

  function showToast(message, isError = false) {
    if (!toastElement || !toastMessageElement) return;
    toastMessageElement.textContent = message;
    toastElement.classList.remove('bg-gray-800', 'bg-red-600'); // Reset colors
    if(isError) {
        toastElement.classList.add('bg-red-600');
    } else {
        toastElement.classList.add('bg-gray-800');
    }
    toastElement.classList.add('show');
    clearTimeout(toastTimeout);
    toastTimeout = setTimeout(() => {
      toastElement.classList.remove('show');
    }, 3000);
  }

  // --- Password Visibility Toggle ---
  function togglePasswordVisibility(inputId, toggleElement) {
    const passwordInput = document.getElementById(inputId);
    if (passwordInput.type === "password") {
      passwordInput.type = "text";
      toggleElement.innerHTML = `<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.542-7C3.732 7.943 7.523 5 12 5c1.283 0 2.5.202 3.625.55M17.75 10.25A7.488 7.488 0 0012 7.5a7.488 7.488 0 00-5.75 2.75m9.5 0A7.488 7.488 0 0112 14.5a7.488 7.488 0 01-5.75-2.75M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2 2l20 20"></path></svg>`; // Eye slash
    } else {
      passwordInput.type = "password";
      toggleElement.innerHTML = `<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>`; // Eye
    }
  }

  // --- Change Password Form Submission ---
  const changePasswordForm = document.getElementById('change-password-form');
  if (changePasswordForm) {
    changePasswordForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const currentPassword = document.getElementById('current-password').value;
      const newPassword = document.getElementById('new-password').value;
      const confirmPassword = document.getElementById('confirm-password').value;

      // Basic mockup validation
      if (!currentPassword || !newPassword || !confirmPassword) {
        showToast('Please fill in all fields.', true);
        return;
      }
      if (newPassword.length < 8) {
        showToast('New password must be at least 8 characters.', true);
        return;
      }
      if (newPassword !== confirmPassword) {
        showToast('New passwords do not match.', true);
        return;
      }

      // Simulate API call
      console.log('Attempting to change password...');
      // For mockup purposes, assume success:
      showToast('Password updated successfully!');
      changePasswordForm.reset(); // Clear the form
       // Reset password visibility icons if they were toggled
      document.querySelectorAll('.password-toggle').forEach(toggle => {
          const inputId = toggle.previousElementSibling.id;
          const inputField = document.getElementById(inputId);
          if(inputField.type === 'text') { // if it was toggled to text
             inputField.type = 'password';
             toggle.innerHTML = `<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>`;
          }
      });
      // Optionally, redirect or update UI further
      // setTimeout(() => { window.location.href = 'dashboard.html'; }, 2000);
    });
  }

</script>
</body>
</html>